## Tiina.dev

### About

This project has a long history. This repo contains only the latest version of the site. Older versons are stored in different repo: [Github (This is Me)](https://github.com/tiinsk/ThisIsMe).

### Environment variables

Create a `.env.local` file in the root of the project and add the following variables:
```
-- required --
DATOCMS_PUBLISHED_CONTENT_CDA_TOKEN=example-published-dato-cms-token
STATIC_FONT_URL=http://localhost:3000/fonts

-- optional --
DATOCMS_DRAFT_CONTENT_CDA_TOKEN=example-draft-dato-cms-token
DATOCMS_SHOW_DRAFT_CONTENT=true|false
```

Dato has a published/draft content system. `DATOCMS_DRAFT_CONTENT_CDA_TOKEN` can be used to show draft content on the site. `DATOCMS_DRAFT_CONTENT_CDA_TOKEN` will be used if `DATOCMS_SHOW_DRAFT_CONTENT` is set to `true`.

`DATOCMS_PUBLISHED_CONTENT_CDA_TOKEN` is used in production, so unfinished drafts are not visible there.

`STATIC_FONT_URL` is required for the cv PDF generation. In production, this should point to hosted sites public `/fonts` folder. `@react-pdf/renderer` package font loading is not working properly and requires absolute paths.


### Development

Install dependencies and run the development server:
```sh
npm install
npm run dev
```

### Preview build

```sh
npm run build
npm run preview
```

### DatoCMS

This project uses [DatoCMS](https://www.datocms.com/) to manage content. DatoCms schema can be loaded with the following command:

```sh
npm run generate-schema
```

TypeScript types are automatically generated by [gql.tada](https://gql-tada.0no.co/).

